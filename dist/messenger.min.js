!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):a.Messenger=b()}(this,function(){"use strict";function a(){var a={},b=-1;this.publish=function(b,c){if(!a[b])return!1;for(var d=a[b],e=d?d.length:0;e--;)d[e].func.apply(this,c);return this},this.subscribe=function(c,d){if(!c||"function"!=typeof d)throw new Error("Missing a valid channel or callback");a[c]||(a[c]=[]);var e=(++b).toString();return a[c].push({token:e,func:d}),e},this.unsubscribe=function(b){if(!b)throw new Error("Can't unsubscribe without a valid token");for(var c in a)if(a[c])for(var d=0,e=a[c].length;e>d;d++)if(a[c][d].token===b)return a[c].splice(d,1),b;throw new Error("Can't unsubscribe from a token that doesn't exist")}}return a});